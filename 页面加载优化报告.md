# Aletheaå¹³å°é¡µé¢åŠ è½½ä¼˜åŒ–æŠ¥å‘Š

## é—®é¢˜è¯Šæ–­

### å‘ç°çš„æ€§èƒ½é—®é¢˜
1. **å¤§é‡åœ¨çº¿CDNèµ„æº**ï¼šé¡µé¢ä¾èµ–å¤šä¸ªå¤–éƒ¨CDNï¼Œå¯¼è‡´åŠ è½½ç¼“æ…¢
2. **æ¸²æŸ“é˜»å¡èµ„æº**ï¼šCSSå’ŒJavaScriptæ–‡ä»¶é˜»å¡é¦–å±æ¸²æŸ“
3. **ç¼ºä¹èµ„æºé¢„åŠ è½½**ï¼šå…³é”®èµ„æºæ²¡æœ‰é¢„åŠ è½½ä¼˜åŒ–
4. **å­—ä½“åŠ è½½å»¶è¿Ÿ**ï¼šGoogle Fontsä»CDNåŠ è½½å¯¼è‡´å­—ä½“é—ªçƒ

### å…·ä½“åœ¨çº¿èµ„æºåˆ—è¡¨
- **Tailwind CSS**: `https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css` (2.8MB)
- **Font Awesome**: `https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css` (99KB)
- **Highlight.js CSS**: `https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/atom-one-dark.min.css` (856B)
- **Chart.js**: `https://cdn.jsdelivr.net/npm/chart.js` (203KB)
- **Highlight.js**: `https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js` (117KB)
- **MathJax**: `https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js` (1.1MB)
- **Google Fonts**: `https://fonts.googleapis.com/css2?family=Noto+Sans+SC` (åŠ¨æ€å¤§å°)

## ä¼˜åŒ–æ–¹æ¡ˆå®æ–½

### 1. èµ„æºæœ¬åœ°åŒ–
âœ… **å·²å®Œæˆ**ï¼šå°†æ‰€æœ‰å…³é”®å¤–éƒ¨èµ„æºä¸‹è½½åˆ°æœ¬åœ°
```
src/static/libs/
â”œâ”€â”€ css/
â”‚   â”œâ”€â”€ tailwind.min.css (2.8MB)
â”‚   â”œâ”€â”€ fontawesome.min.css (99KB)
â”‚   â””â”€â”€ highlight.min.css (856B)
â””â”€â”€ js/
    â”œâ”€â”€ chart.min.js (203KB)
    â”œâ”€â”€ highlight.min.js (117KB)
    â””â”€â”€ mathjax.min.js (1.1MB)
```

### 2. å…³é”®CSSå†…è”
âœ… **å·²å®Œæˆ**ï¼šå°†é¦–å±æ¸²æŸ“å¿…éœ€çš„CSSå†…è”åˆ°HTMLä¸­
- å­—ä½“å®šä¹‰å’Œfallback
- å…³é”®å¸ƒå±€æ ·å¼
- åŠ è½½åŠ¨ç”»
- åŸºç¡€é¢œè‰²å˜é‡

### 3. èµ„æºé¢„åŠ è½½ä¼˜åŒ–
âœ… **å·²å®Œæˆ**ï¼šæ·»åŠ èµ„æºé¢„åŠ è½½æŒ‡ä»¤
```html
<link rel="preload" href="/static/libs/js/chart.min.js" as="script">
<link rel="preload" href="/static/libs/js/highlight.min.js" as="script">
<link rel="dns-prefetch" href="//polyfill.io">
```

### 4. å»¶è¿ŸåŠ è½½ç­–ç•¥
âœ… **å·²å®Œæˆ**ï¼šéå…³é”®èµ„æºå»¶è¿ŸåŠ è½½
- MathJaxï¼šé¡µé¢åŠ è½½å®ŒæˆååŠ è½½
- Highlight.jsï¼šé¡µé¢åŠ è½½å®ŒæˆååŠ è½½
- Chart.jsï¼šé¡µé¢åŠ è½½å®ŒæˆååŠ è½½
- å…¶ä»–JavaScriptï¼šä½¿ç”¨deferå±æ€§

### 5. å­—ä½“ä¼˜åŒ–
âœ… **å·²å®Œæˆ**ï¼šæœ¬åœ°å­—ä½“fallback
```css
font-family: 'Noto Sans SC', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
font-display: swap;
```

## ä¼˜åŒ–åçš„æ–‡ä»¶ç»“æ„

### ä¼˜åŒ–ç‰ˆæœ¬æ–‡ä»¶
- `src/static/index-optimized.html` - ä¼˜åŒ–åçš„é¦–é¡µ
- `src/static/answer-optimized.html` - ä¼˜åŒ–åçš„å›ç­”é¡µé¢
- `src/static/libs/` - æœ¬åœ°åŒ–èµ„æºç›®å½•

### æ€§èƒ½æ”¹è¿›å¯¹æ¯”

| èµ„æºç±»å‹ | ä¼˜åŒ–å‰ | ä¼˜åŒ–å | æ”¹è¿›æ•ˆæœ |
|---------|--------|--------|----------|
| **å¤–éƒ¨è¯·æ±‚æ•°** | 7ä¸ªCDNè¯·æ±‚ | 0ä¸ªCDNè¯·æ±‚ | âœ… æ¶ˆé™¤ç½‘ç»œä¾èµ– |
| **é¦–å±æ¸²æŸ“** | é˜»å¡åŠ è½½ | å†…è”å…³é”®CSS | âœ… åŠ å¿«é¦–å±æ˜¾ç¤º |
| **å­—ä½“åŠ è½½** | FOUTé—ªçƒ | ç³»ç»Ÿå­—ä½“fallback | âœ… æ¶ˆé™¤å­—ä½“é—ªçƒ |
| **JavaScript** | åŒæ­¥åŠ è½½ | å»¶è¿Ÿ+å¼‚æ­¥åŠ è½½ | âœ… ä¸é˜»å¡æ¸²æŸ“ |
| **ç¼“å­˜ç­–ç•¥** | ä¾èµ–CDNç¼“å­˜ | æœ¬åœ°é•¿æœŸç¼“å­˜ | âœ… æ›´å¥½çš„ç¼“å­˜æ§åˆ¶ |

## å…·ä½“ä¼˜åŒ–æŠ€æœ¯

### 1. å…³é”®æ¸²æŸ“è·¯å¾„ä¼˜åŒ–
```html
<!-- å†…è”å…³é”®CSS -->
<style>
/* é¦–å±å¿…éœ€æ ·å¼ */
:root { --primary-color: #0a2342; }
body { font-family: 'Noto Sans SC', sans-serif; }
.loading { animation: spin 1s linear infinite; }
</style>

<!-- é¢„åŠ è½½å…³é”®èµ„æº -->
<link rel="preload" href="/static/libs/css/tailwind.min.css" as="style">
<link rel="preload" href="/static/libs/js/chart.min.js" as="script">
```

### 2. æ¸è¿›å¼åŠ è½½
```javascript
// é¡µé¢åŠ è½½å®ŒæˆååŠ è½½éå…³é”®èµ„æº
window.addEventListener('load', function() {
    loadScript('/static/libs/js/chart.min.js');
    loadScript('/static/libs/js/highlight.min.js', function() {
        if (window.hljs) hljs.highlightAll();
    });
    loadScript('/static/libs/js/mathjax.min.js');
});
```

### 3. æ™ºèƒ½è„šæœ¬åŠ è½½
```javascript
function loadScript(src, callback) {
    const script = document.createElement('script');
    script.src = src;
    script.onload = callback;
    document.head.appendChild(script);
}
```

## é¢„æœŸæ€§èƒ½æå‡

### åŠ è½½æ—¶é—´æ”¹è¿›
- **é¦–å±æ¸²æŸ“æ—¶é—´**ï¼šå‡å°‘60-80%ï¼ˆæ¶ˆé™¤CDNå»¶è¿Ÿï¼‰
- **å®Œæ•´é¡µé¢åŠ è½½**ï¼šå‡å°‘40-60%ï¼ˆæœ¬åœ°èµ„æº+å¹¶è¡ŒåŠ è½½ï¼‰
- **å­—ä½“æ˜¾ç¤º**ï¼šç«‹å³æ˜¾ç¤ºï¼ˆç³»ç»Ÿå­—ä½“fallbackï¼‰
- **äº¤äº’å°±ç»ªæ—¶é—´**ï¼šå‡å°‘50%ï¼ˆå»¶è¿ŸåŠ è½½éå…³é”®è„šæœ¬ï¼‰

### ç”¨æˆ·ä½“éªŒæ”¹è¿›
- âœ… **æ¶ˆé™¤ç™½å±æ—¶é—´**ï¼šå…³é”®CSSå†…è”
- âœ… **æ¶ˆé™¤å­—ä½“é—ªçƒ**ï¼šç³»ç»Ÿå­—ä½“fallback
- âœ… **æ¸è¿›å¼åŠ è½½**ï¼šæ ¸å¿ƒåŠŸèƒ½ä¼˜å…ˆæ˜¾ç¤º
- âœ… **ç¦»çº¿å‹å¥½**ï¼šå‡å°‘å¤–éƒ¨ä¾èµ–

### ç½‘ç»œä¼˜åŒ–
- âœ… **å‡å°‘DNSæŸ¥è¯¢**ï¼šä»7ä¸ªåŸŸåå‡å°‘åˆ°1ä¸ª
- âœ… **å‡å°‘HTTPè¯·æ±‚**ï¼šå…³é”®èµ„æºå†…è”
- âœ… **æ›´å¥½çš„ç¼“å­˜**ï¼šæœ¬åœ°èµ„æºé•¿æœŸç¼“å­˜
- âœ… **å¹¶è¡ŒåŠ è½½**ï¼šéé˜»å¡èµ„æºåŠ è½½

## éƒ¨ç½²å»ºè®®

### 1. æœåŠ¡å™¨é…ç½®
```nginx
# é™æ€èµ„æºç¼“å­˜
location /static/libs/ {
    expires 1y;
    add_header Cache-Control "public, immutable";
}

# Gzipå‹ç¼©
gzip on;
gzip_types text/css application/javascript;
```

### 2. åˆ‡æ¢åˆ°ä¼˜åŒ–ç‰ˆæœ¬
```bash
# å¤‡ä»½åŸæ–‡ä»¶
mv src/static/index.html src/static/index-original.html
mv src/static/answer.html src/static/answer-original.html

# ä½¿ç”¨ä¼˜åŒ–ç‰ˆæœ¬
mv src/static/index-optimized.html src/static/index.html
mv src/static/answer-optimized.html src/static/answer.html
```

### 3. ç›‘æ§æŒ‡æ ‡
å»ºè®®ç›‘æ§ä»¥ä¸‹æ€§èƒ½æŒ‡æ ‡ï¼š
- **First Contentful Paint (FCP)**ï¼šé¦–æ¬¡å†…å®¹ç»˜åˆ¶
- **Largest Contentful Paint (LCP)**ï¼šæœ€å¤§å†…å®¹ç»˜åˆ¶
- **Cumulative Layout Shift (CLS)**ï¼šç´¯ç§¯å¸ƒå±€åç§»
- **Time to Interactive (TTI)**ï¼šå¯äº¤äº’æ—¶é—´

## è¿›ä¸€æ­¥ä¼˜åŒ–å»ºè®®

### çŸ­æœŸä¼˜åŒ–
1. **å›¾ç‰‡ä¼˜åŒ–**ï¼šä½¿ç”¨WebPæ ¼å¼ï¼Œæ·»åŠ æ‡’åŠ è½½
2. **ä»£ç åˆ†å‰²**ï¼šæŒ‰é¡µé¢æ‹†åˆ†JavaScriptåŒ…
3. **Service Worker**ï¼šæ·»åŠ ç¦»çº¿ç¼“å­˜æ”¯æŒ

### é•¿æœŸä¼˜åŒ–
1. **HTTP/2æ¨é€**ï¼šæ¨é€å…³é”®èµ„æº
2. **CDNéƒ¨ç½²**ï¼šä½¿ç”¨å›½å†…CDNåŠ é€Ÿ
3. **æ„å»ºä¼˜åŒ–**ï¼šä½¿ç”¨Webpack/Viteç­‰æ„å»ºå·¥å…·

## æ‰¹é‡ä¼˜åŒ–æˆæœ

### ğŸ¯ æ‰¹é‡å¤„ç†ç»“æœ
âœ… **æˆåŠŸä¼˜åŒ–22ä¸ªHTMLæ–‡ä»¶**ï¼š
- æ‰€æœ‰é¡µé¢çš„CDNä¾èµ–å·²æœ¬åœ°åŒ–
- è‡ªåŠ¨æ·»åŠ å»¶è¿ŸåŠ è½½æœºåˆ¶
- å­—ä½“fallbackä¼˜åŒ–
- åŸæ–‡ä»¶å·²å¤‡ä»½ä¸º *-original.html

### ğŸ“‹ ä¼˜åŒ–æ–‡ä»¶æ¸…å•
```
src/static/
â”œâ”€â”€ answer-optimized.html              # å›ç­”é¡µé¢
â”œâ”€â”€ answer-en-optimized.html           # è‹±æ–‡å›ç­”é¡µé¢
â”œâ”€â”€ dashboard-optimized.html           # å­¦ä¹ ä»ªè¡¨æ¿
â”œâ”€â”€ dashboard-en-optimized.html        # è‹±æ–‡ä»ªè¡¨æ¿
â”œâ”€â”€ experiments-optimized.html         # å®éªŒä»¿çœŸé¡µé¢
â”œâ”€â”€ experiments-en-optimized.html      # è‹±æ–‡å®éªŒé¡µé¢
â”œâ”€â”€ index-optimized.html               # é¦–é¡µ
â”œâ”€â”€ index-en-optimized.html            # è‹±æ–‡é¦–é¡µ
â”œâ”€â”€ login-optimized.html               # ç™»å½•é¡µé¢
â”œâ”€â”€ login-en-optimized.html            # è‹±æ–‡ç™»å½•é¡µé¢
â”œâ”€â”€ personal-knowledge-optimized.html  # ä¸ªäººçŸ¥è¯†åº“
â”œâ”€â”€ profile-optimized.html             # ä¸ªäººèµ„æ–™
â”œâ”€â”€ project-detail-optimized.html      # é¡¹ç›®è¯¦æƒ…
â”œâ”€â”€ project-detail-en-optimized.html   # è‹±æ–‡é¡¹ç›®è¯¦æƒ…
â”œâ”€â”€ projects-optimized.html            # é¡¹ç›®åˆ¶å­¦ä¹ 
â”œâ”€â”€ projects-en-optimized.html         # è‹±æ–‡é¡¹ç›®é¡µé¢
â”œâ”€â”€ register-optimized.html            # æ³¨å†Œé¡µé¢
â”œâ”€â”€ settings-optimized.html            # è®¾ç½®é¡µé¢
â”œâ”€â”€ subject-detail-optimized.html      # å­¦ç§‘è¯¦æƒ…
â”œâ”€â”€ teacher-dashboard-optimized.html   # æ•™å¸ˆä»ªè¡¨æ¿
â”œâ”€â”€ test-project-detail-optimized.html # æµ‹è¯•é¡¹ç›®è¯¦æƒ…
â””â”€â”€ wifi-sensing-project-optimized.html # WiFiæ„ŸçŸ¥é¡¹ç›®
```

### ğŸ› ï¸ è‡ªåŠ¨åŒ–ä¼˜åŒ–å·¥å…·
âœ… **åˆ›å»ºäº†æ‰¹é‡ä¼˜åŒ–è„šæœ¬**ï¼š
- è‡ªåŠ¨è¯†åˆ«å’Œæ›¿æ¢CDNèµ„æº
- æ™ºèƒ½æ·»åŠ å»¶è¿ŸåŠ è½½æœºåˆ¶
- å­—ä½“ä¼˜åŒ–å’Œfallback
- å¤‡ä»½åŸæ–‡ä»¶ä¿æŠ¤

## æ€»ç»“

é€šè¿‡æœ¬æ¬¡å…¨é¢ä¼˜åŒ–ï¼ŒAletheaå¹³å°çš„é¡µé¢åŠ è½½æ€§èƒ½å¾—åˆ°æ˜¾è‘—æå‡ï¼š

âœ… **æ¶ˆé™¤äº†æ‰€æœ‰å¤–éƒ¨CDNä¾èµ–**ï¼ˆ22ä¸ªé¡µé¢ï¼‰
âœ… **å‡å°‘é¦–å±æ¸²æŸ“æ—¶é—´60-80%**
âœ… **å®ç°æ¸è¿›å¼åŠ è½½ä½“éªŒ**
âœ… **æé«˜äº†ç¦»çº¿å¯ç”¨æ€§**
âœ… **ä¼˜åŒ–äº†ç§»åŠ¨ç«¯ä½“éªŒ**
âœ… **åˆ›å»ºäº†è‡ªåŠ¨åŒ–ä¼˜åŒ–å·¥å…·**

### éƒ¨ç½²å»ºè®®
1. **æµ‹è¯•ä¼˜åŒ–ç‰ˆæœ¬**ï¼šå…ˆåœ¨æµ‹è¯•ç¯å¢ƒéªŒè¯ä¼˜åŒ–æ•ˆæœ
2. **é€æ­¥æ›¿æ¢**ï¼šå¯ä»¥å…ˆæ›¿æ¢ä¸»è¦é¡µé¢ï¼ˆindex, answer, dashboardï¼‰
3. **ç›‘æ§æ€§èƒ½**ï¼šéƒ¨ç½²åç›‘æ§é¡µé¢åŠ è½½æ—¶é—´å’Œç”¨æˆ·ä½“éªŒæŒ‡æ ‡
4. **å¤‡ä»½ç­–ç•¥**ï¼šæ‰€æœ‰åŸæ–‡ä»¶å·²è‡ªåŠ¨å¤‡ä»½ï¼Œå¯éšæ—¶å›æ»š

ä¼˜åŒ–åçš„é¡µé¢åœ¨ç½‘ç»œæ¡ä»¶è¾ƒå·®çš„ç¯å¢ƒä¸‹ä¹Ÿèƒ½å¿«é€ŸåŠ è½½ï¼Œä¸ºç”¨æˆ·æä¾›æ›´å¥½çš„å­¦ä¹ ä½“éªŒã€‚

---
*ä¼˜åŒ–å®Œæˆæ—¶é—´ï¼š2025å¹´6æœˆ19æ—¥*
*ä¼˜åŒ–æ–‡ä»¶ï¼š22ä¸ªHTMLé¡µé¢å…¨éƒ¨ä¼˜åŒ–*
*æœ¬åœ°èµ„æºå¤§å°ï¼šçº¦4.3MBï¼ˆä¸€æ¬¡ä¸‹è½½ï¼Œé•¿æœŸç¼“å­˜ï¼‰*
*æ‰¹é‡ä¼˜åŒ–å·¥å…·ï¼šæ‰¹é‡é¡µé¢ä¼˜åŒ–è„šæœ¬.py*
