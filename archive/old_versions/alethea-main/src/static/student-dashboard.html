<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¸ªäººä¸­å¿ƒ - Alethea</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Chart.js for charts -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Custom styles -->
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;500;700&display=swap');
        
        :root {
            --primary-color: #0a2342;
            --secondary-color: #126872;
            --accent-color: #2ca58d;
            --light-color: #f8f9fa;
            --dark-color: #212529;
        }
        
        body {
            font-family: 'Noto Sans SC', sans-serif;
            background-color: #f5f7fa;
        }
        
        .dashboard-card {
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }
        
        .dashboard-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 15px rgba(0, 0, 0, 0.15);
        }
        
        .stat-card {
            border-radius: 12px;
            padding: 24px;
            position: relative;
            overflow: hidden;
            color: white;
        }
        
        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 80px;
            height: 80px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            transform: translate(20px, -20px);
        }
        
        .stat-card.purple {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .stat-card.pink {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        }
        
        .stat-card.blue {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
        }
        
        .stat-card.green {
            background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
        }
        
        .ai-portrait-section {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 16px;
            padding: 24px;
        }
        
        .trait-bar {
            background: rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            height: 8px;
            overflow: hidden;
        }
        
        .trait-progress {
            background: rgba(255, 255, 255, 0.8);
            height: 100%;
            border-radius: 10px;
            transition: width 1s ease-in-out;
        }
        
        .project-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            border-left: 4px solid var(--accent-color);
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .project-card:hover {
            border-left-width: 8px;
            transform: translateX(4px);
        }
        
        .difficulty-badge {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 500;
        }
        
        .difficulty-easy {
            background: #d1fae5;
            color: #065f46;
        }
        
        .difficulty-medium {
            background: #fef3c7;
            color: #92400e;
        }
        
        .difficulty-hard {
            background: #fee2e2;
            color: #991b1b;
        }
        
        .knowledge-node {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 12px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .knowledge-node:hover {
            transform: scale(1.1);
        }
        
        .knowledge-mastered {
            background: #10b981;
        }
        
        .knowledge-learning {
            background: #f59e0b;
        }
        
        .knowledge-todo {
            background: #6b7280;
        }
        
        .activity-item {
            display: flex;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid #f3f4f6;
        }
        
        .activity-item:last-child {
            border-bottom: none;
        }
        
        .activity-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 12px;
        }
        
        .tab-button {
            padding: 8px 16px;
            border-radius: 6px;
            border: none;
            background: #f3f4f6;
            color: #6b7280;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 14px;
        }
        
        .tab-button.active {
            background: var(--accent-color);
            color: white;
        }
        
        .chart-container {
            position: relative;
            height: 200px;
            margin: 20px 0;
        }
        
        @media (max-width: 768px) {
            .dashboard-card {
                margin-bottom: 16px;
            }
            
            .stat-card {
                padding: 16px;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="bg-white shadow-sm py-4">
        <div class="container mx-auto px-4 flex justify-between items-center">
            <div class="flex items-center">
                <img src="/static/logo.png" alt="Alethea Logo" class="h-12 mr-3">
                <span class="text-2xl font-bold text-primary">Alethea</span>
            </div>
            <div class="hidden md:flex space-x-8">
                <a href="/static/index.html" class="nav-link font-medium">é¦–é¡µ</a>
                <a href="/static/projects.html" class="nav-link font-medium">é¡¹ç›®åˆ¶å­¦ä¹ </a>
                <a href="/static/answer.html" class="nav-link font-medium">AIé—®ç­”</a>
                <a href="/static/student-dashboard.html" class="nav-link font-medium text-blue-600">ä¸ªäººä¸­å¿ƒ</a>
            </div>
            <div class="flex items-center space-x-4">
                <!-- Language Switcher -->
                <div class="language-switcher cursor-pointer" onclick="switchLanguage()">
                    <span class="text-lg">ğŸ‡ºğŸ‡¸</span>
                    <span class="text-sm font-medium">English</span>
                    <i class="fas fa-chevron-down text-xs"></i>
                </div>
                
                <button id="theme-toggle" class="p-2 rounded-full hover:bg-gray-100" title="åˆ‡æ¢ä¸»é¢˜">
                    <i class="fas fa-moon"></i>
                </button>
                
                <div class="relative" id="user-menu">
                    <button id="user-menu-button" class="flex items-center space-x-2 focus:outline-none">
                        <div class="w-8 h-8 rounded-full bg-blue-500 flex items-center justify-center">
                            <i class="fas fa-user text-white"></i>
                        </div>
                        <span class="hidden md:inline-block font-medium">å¼ è€å¸ˆ</span>
                        <i class="fas fa-chevron-down text-sm hidden md:inline-block"></i>
                    </button>
                    
                    <div class="absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 hidden" id="user-dropdown">
                        <div class="px-4 py-2 text-sm text-gray-500 border-b border-gray-100">
                            <div class="font-medium">å¼ è€å¸ˆ</div>
                            <div class="text-xs">ç”µå­å·¥ç¨‹ç³»å­¦ç”Ÿ</div>
                        </div>
                        <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">
                            <i class="fas fa-user-circle mr-2"></i>ä¸ªäººèµ„æ–™
                        </a>
                        <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">
                            <i class="fas fa-cog mr-2"></i>å­¦ä¹ è®¾ç½®
                        </a>
                        <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">
                            <i class="fas fa-chart-bar mr-2"></i>å­¦ä¹ æŠ¥å‘Š
                        </a>
                        <div class="border-t border-gray-100"></div>
                        <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">
                            <i class="fas fa-sign-out-alt mr-2"></i>é€€å‡ºç™»å½•
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <div class="container mx-auto px-4 py-8">
        <!-- Welcome Section -->
        <div class="mb-8">
            <h1 class="text-3xl font-bold text-gray-800 mb-2">æ¬¢è¿å›æ¥ï¼Œå¼ è€å¸ˆï¼</h1>
            <p class="text-gray-600">ç»§ç»­æ‚¨çš„å­¦ä¹ ä¹‹æ—…ï¼Œæ¢ç´¢æ›´å¤šçŸ¥è¯†</p>
        </div>

        <!-- å­¦ä¹ ç»Ÿè®¡å¡ç‰‡ -->
        <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
            <div class="stat-card purple">
                <div class="relative z-10">
                    <div class="flex items-center justify-between mb-2">
                        <h3 class="text-lg font-semibold">å­¦ä¹ å¤©æ•°</h3>
                        <i class="fas fa-calendar text-2xl opacity-80"></i>
                    </div>
                    <div class="text-3xl font-bold mb-1">0</div>
                    <div class="text-sm opacity-80">è¿ç»­å­¦ä¹ è®°å½•</div>
                </div>
            </div>

            <div class="stat-card pink">
                <div class="relative z-10">
                    <div class="flex items-center justify-between mb-2">
                        <h3 class="text-lg font-semibold">æé—®æ¬¡æ•°</h3>
                        <i class="fas fa-question-circle text-2xl opacity-80"></i>
                    </div>
                    <div class="text-3xl font-bold mb-1">0</div>
                    <div class="text-sm opacity-80">AIé—®ç­”äº’åŠ¨</div>
                </div>
            </div>

            <div class="stat-card blue">
                <div class="relative z-10">
                    <div class="flex items-center justify-between mb-2">
                        <h3 class="text-lg font-semibold">é¡¹ç›®å‚ä¸</h3>
                        <i class="fas fa-project-diagram text-2xl opacity-80"></i>
                    </div>
                    <div class="text-3xl font-bold mb-1">0</div>
                    <div class="text-sm opacity-80">å®Œæˆé¡¹ç›®æ•°é‡</div>
                </div>
            </div>

            <div class="stat-card green">
                <div class="relative z-10">
                    <div class="flex items-center justify-between mb-2">
                        <h3 class="text-lg font-semibold">å­¦ä¹ ç§¯åˆ†</h3>
                        <i class="fas fa-star text-2xl opacity-80"></i>
                    </div>
                    <div class="text-3xl font-bold mb-1">0</div>
                    <div class="text-sm opacity-80">ç´¯è®¡è·å¾—ç§¯åˆ†</div>
                </div>
            </div>
        </div>

        <!-- ä¸»è¦å†…å®¹åŒºåŸŸ -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            <!-- å·¦ä¾§ï¼šAIæ•°å­—ç”»åƒå’Œå­¦ä¹ åˆ†æ -->
            <div class="lg:col-span-2">
                <!-- AIæ•°å­—ç”»åƒ -->
                <div class="dashboard-card mb-6">
                    <div class="ai-portrait-section">
                        <div class="flex items-center mb-4">
                            <i class="fas fa-user-circle text-2xl mr-3"></i>
                            <h3 class="text-xl font-bold">AIæ•°å­—ç”»åƒ</h3>
                            <button class="ml-auto bg-white bg-opacity-20 hover:bg-opacity-30 px-3 py-1 rounded-lg text-sm transition-colors" onclick="updatePortrait()">
                                <i class="fas fa-sync-alt mr-1"></i>æ›´æ–°ç”»åƒ
                            </button>
                        </div>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <!-- å­¦ä¹ ç‰¹å¾ -->
                            <div>
                                <h4 class="font-semibold mb-3">å­¦ä¹ ç‰¹å¾</h4>
                                <div class="space-y-3">
                                    <div>
                                        <div class="flex justify-between text-sm mb-1">
                                            <span>å­¦ä¹ é£æ ¼:</span>
                                            <span>æ··åˆå‹</span>
                                        </div>
                                    </div>
                                    <div>
                                        <div class="flex justify-between text-sm mb-1">
                                            <span>å­¦ä¹ èŠ‚å¥:</span>
                                            <span>ç¨³æ­¥å‹</span>
                                        </div>
                                    </div>
                                    <div>
                                        <div class="flex justify-between text-sm mb-1">
                                            <span>ç½®ä¿¡åº¦:</span>
                                            <span>0%</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- ä¸ªæ€§ç‰¹å¾ -->
                            <div>
                                <h4 class="font-semibold mb-3">ä¸ªæ€§ç‰¹å¾</h4>
                                <div class="space-y-3">
                                    <div>
                                        <div class="flex justify-between text-sm mb-1">
                                            <span>å¥½å¥‡å¿ƒ</span>
                                            <span>0%</span>
                                        </div>
                                        <div class="trait-bar">
                                            <div class="trait-progress" style="width: 0%"></div>
                                        </div>
                                    </div>
                                    <div>
                                        <div class="flex justify-between text-sm mb-1">
                                            <span>ç¨³æ­¥å‹</span>
                                            <span>0%</span>
                                        </div>
                                        <div class="trait-bar">
                                            <div class="trait-progress" style="width: 0%"></div>
                                        </div>
                                    </div>
                                    <div>
                                        <div class="flex justify-between text-sm mb-1">
                                            <span>åšæŒæ€§</span>
                                            <span>0%</span>
                                        </div>
                                        <div class="trait-bar">
                                            <div class="trait-progress" style="width: 0%"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="mt-6 p-4 bg-white bg-opacity-10 rounded-lg">
                            <h4 class="font-semibold mb-2">AIæ´å¯Ÿ</h4>
                            <p class="text-sm opacity-90">
                                å»ºè®®æ‚¨å»ºç«‹æ›´è§„å¾‹çš„å­¦ä¹ ä¹ æƒ¯ï¼Œæé«˜å­¦ä¹ æ•ˆç‡ã€‚å»ºè®®ç”¨æˆ·å°è¯•å»¶é•¿å­¦ä¹ æ—¶é—´ï¼Œè¿›è¡Œæ›´æ·±å…¥çš„æ¢ç´¢ã€‚
                            </p>
                        </div>
                    </div>
                </div>

                <!-- å­¦ä¹ åˆ†æ -->
                <div class="dashboard-card">
                    <div class="p-6">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="text-xl font-bold">
                                <i class="fas fa-chart-line mr-2 text-green-500"></i>å­¦ä¹ åˆ†æ
                            </h3>
                            <div class="flex space-x-2">
                                <button class="tab-button active" onclick="switchTab('participation')">å‚ä¸åº¦</button>
                                <button class="tab-button" onclick="switchTab('subject')">å­¦ç§‘åˆ†å¸ƒ</button>
                                <button class="tab-button" onclick="switchTab('progress')">å­¦ä¹ è¿›åº¦</button>
                            </div>
                        </div>
                        
                        <!-- å‚ä¸åº¦å›¾è¡¨ -->
                        <div id="participation-chart" class="chart-container">
                            <canvas id="participationCanvas"></canvas>
                        </div>
                        
                        <!-- å­¦ç§‘åˆ†å¸ƒå›¾è¡¨ -->
                        <div id="subject-chart" class="chart-container" style="display: none;">
                            <canvas id="subjectCanvas"></canvas>
                        </div>
                        
                        <!-- å­¦ä¹ è¿›åº¦å›¾è¡¨ -->
                        <div id="progress-chart" class="chart-container" style="display: none;">
                            <canvas id="progressCanvas"></canvas>
                        </div>
                        
                        <div class="grid grid-cols-3 gap-4 mt-4 text-center">
                            <div>
                                <div class="text-2xl font-bold text-blue-600">85%</div>
                                <div class="text-sm text-gray-600">å®Œæˆç‡</div>
                            </div>
                            <div>
                                <div class="text-2xl font-bold text-green-600">92%</div>
                                <div class="text-sm text-gray-600">æ­£ç¡®ç‡</div>
                            </div>
                            <div>
                                <div class="text-2xl font-bold text-purple-600">78%</div>
                                <div class="text-sm text-gray-600">æ´»è·ƒåº¦</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- å³ä¾§ï¼šAIæ¨èé¡¹ç›®ã€çŸ¥è¯†å›¾è°±ã€æœ€è¿‘æ´»åŠ¨ -->
            <div>
                <!-- AIæ¨èé¡¹ç›® -->
                <div class="dashboard-card mb-6">
                    <div class="p-6">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="text-xl font-bold">
                                <i class="fas fa-lightbulb mr-2 text-orange-500"></i>AIæ¨èé¡¹ç›®
                            </h3>
                            <button class="text-blue-600 hover:text-blue-800 text-sm" onclick="refreshRecommendations()">
                                <i class="fas fa-sync-alt mr-1"></i>åˆ·æ–°
                            </button>
                        </div>
                        
                        <div class="space-y-4">
                            <div class="project-card" onclick="viewProject('led-matrix')">
                                <div class="flex items-start justify-between mb-2">
                                    <h4 class="font-semibold text-gray-800">LEDç‚¹é˜µæ˜¾ç¤ºå±</h4>
                                    <span class="difficulty-badge difficulty-easy">ç®€å•</span>
                                </div>
                                <p class="text-sm text-gray-600 mb-3">å¯ä»¥å­¦ä¹ æ•°å­—ç”µè·¯ï¼ŒLEDé©±åŠ¨ç­‰åŸºç¡€æŠ€èƒ½</p>
                                <div class="flex items-center justify-between">
                                    <span class="text-xs text-gray-500">80%åŒ¹é…åº¦</span>
                                    <i class="fas fa-arrow-right text-blue-500"></i>
                                </div>
                            </div>

                            <div class="project-card" onclick="viewProject('weather-station')">
                                <div class="flex items-start justify-between mb-2">
                                    <h4 class="font-semibold text-gray-800">æ°”è±¡ç›‘æµ‹ç«™</h4>
                                    <span class="difficulty-badge difficulty-easy">ç®€å•</span>
                                </div>
                                <p class="text-sm text-gray-600 mb-3">å¯ä»¥å­¦ä¹ ç¯å¢ƒä¼ æ„Ÿå™¨ï¼Œæ•°æ®é‡‡é›†ç­‰åŸºç¡€æŠ€èƒ½</p>
                                <div class="flex items-center justify-between">
                                    <span class="text-xs text-gray-500">80%åŒ¹é…åº¦</span>
                                    <i class="fas fa-arrow-right text-blue-500"></i>
                                </div>
                            </div>

                            <div class="project-card" onclick="viewProject('digital-clock')">
                                <div class="flex items-start justify-between mb-2">
                                    <h4 class="font-semibold text-gray-800">æ•°å­—æ—¶é’Ÿ</h4>
                                    <span class="difficulty-badge difficulty-medium">ä¸­ç­‰</span>
                                </div>
                                <p class="text-sm text-gray-600 mb-3">å¯ä»¥å­¦ä¹ æ—¶é’Ÿç”µè·¯ï¼ŒLCDæ˜¾ç¤ºç­‰åŸºç¡€æŠ€èƒ½</p>
                                <div class="flex items-center justify-between">
                                    <span class="text-xs text-gray-500">80%åŒ¹é…åº¦</span>
                                    <i class="fas fa-arrow-right text-blue-500"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- çŸ¥è¯†å›¾è°± -->
                <div class="dashboard-card mb-6">
                    <div class="p-6">
                        <h3 class="text-xl font-bold mb-4">
                            <i class="fas fa-sitemap mr-2 text-purple-500"></i>çŸ¥è¯†å›¾è°±
                        </h3>
                        
                        <div class="text-center mb-4">
                            <p class="text-sm text-gray-600">æš‚æ— çŸ¥è¯†ç‚¹æ•°æ®</p>
                        </div>
                        
                        <!-- çŸ¥è¯†ç‚¹ç½‘ç»œå›¾ -->
                        <div class="relative h-48 bg-gray-50 rounded-lg flex items-center justify-center">
                            <div class="text-center">
                                <i class="fas fa-network-wired text-4xl text-gray-400 mb-2"></i>
                                <p class="text-gray-500 text-sm">å¼€å§‹å­¦ä¹ åå°†æ˜¾ç¤ºçŸ¥è¯†å›¾è°±</p>
                            </div>
                        </div>
                        
                        <div class="mt-4 flex justify-center">
                            <button class="bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg text-sm" onclick="exploreKnowledge()">
                                <i class="fas fa-search mr-2"></i>æ¢ç´¢çŸ¥è¯†ç‚¹
                            </button>
                        </div>
                    </div>
                </div>

                <!-- æœ€è¿‘æ´»åŠ¨ -->
                <div class="dashboard-card">
                    <div class="p-6">
                        <h3 class="text-xl font-bold mb-4">
                            <i class="fas fa-clock mr-2 text-blue-500"></i>æœ€è¿‘æ´»åŠ¨
                        </h3>
                        
                        <div class="space-y-1">
                            <div class="activity-item">
                                <div class="activity-icon bg-blue-100">
                                    <i class="fas fa-sign-in-alt text-blue-600"></i>
                                </div>
                                <div class="flex-1">
                                    <p class="text-sm font-medium">ç™»å½•ç³»ç»Ÿ</p>
                                    <p class="text-xs text-gray-500">åˆšåˆš</p>
                                </div>
                            </div>
                            
                            <div class="text-center py-8">
                                <i class="fas fa-history text-4xl text-gray-300 mb-2"></i>
                                <p class="text-gray-500 text-sm">æš‚æ— æ›´å¤šæ´»åŠ¨è®°å½•</p>
                                <p class="text-gray-400 text-xs">å¼€å§‹å­¦ä¹ åå°†æ˜¾ç¤ºæ´»åŠ¨å†å²</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- JavaScript -->
    <script>
        let participationChart, subjectChart, progressChart;

        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            initializeCharts();
            initializeUserMenu();
            animateTraitBars();
        });

        // åˆå§‹åŒ–å›¾è¡¨
        function initializeCharts() {
            // å‚ä¸åº¦å›¾è¡¨
            const participationCtx = document.getElementById('participationCanvas').getContext('2d');
            participationChart = new Chart(participationCtx, {
                type: 'line',
                data: {
                    labels: ['6/3', '6/4', '6/5', '6/6', '6/7', '6/8', '6/9'],
                    datasets: [{
                        label: 'å­¦ä¹ æ—¶é•¿(å°æ—¶)',
                        data: [0, 0, 0, 0, 0, 0, 0],
                        borderColor: '#2ca58d',
                        backgroundColor: 'rgba(44, 165, 141, 0.1)',
                        tension: 0.4,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 1.0
                        }
                    }
                }
            });

            // å­¦ç§‘åˆ†å¸ƒå›¾è¡¨
            const subjectCtx = document.getElementById('subjectCanvas').getContext('2d');
            subjectChart = new Chart(subjectCtx, {
                type: 'doughnut',
                data: {
                    labels: ['ç”µå­å·¥ç¨‹', 'æ•°å­¦', 'ç‰©ç†', 'è®¡ç®—æœº'],
                    datasets: [{
                        data: [0, 0, 0, 0],
                        backgroundColor: [
                            '#667eea',
                            '#f093fb',
                            '#4facfe',
                            '#43e97b'
                        ]
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom'
                        }
                    }
                }
            });

            // å­¦ä¹ è¿›åº¦å›¾è¡¨
            const progressCtx = document.getElementById('progressCanvas').getContext('2d');
            progressChart = new Chart(progressCtx, {
                type: 'bar',
                data: {
                    labels: ['åŸºç¡€æ¦‚å¿µ', 'å®è·µåº”ç”¨', 'é¡¹ç›®å®æˆ˜', 'ç»¼åˆèƒ½åŠ›'],
                    datasets: [{
                        label: 'æŒæ¡ç¨‹åº¦',
                        data: [0, 0, 0, 0],
                        backgroundColor: [
                            '#667eea',
                            '#f093fb',
                            '#4facfe',
                            '#43e97b'
                        ]
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 100
                        }
                    }
                }
            });
        }

        // åˆå§‹åŒ–ç”¨æˆ·èœå•
        function initializeUserMenu() {
            const userMenuButton = document.getElementById('user-menu-button');
            const userDropdown = document.getElementById('user-dropdown');
            
            userMenuButton.addEventListener('click', function() {
                userDropdown.classList.toggle('hidden');
            });
            
            // ç‚¹å‡»å¤–éƒ¨å…³é—­èœå•
            document.addEventListener('click', function(event) {
                if (!userMenuButton.contains(event.target) && !userDropdown.contains(event.target)) {
                    userDropdown.classList.add('hidden');
                }
            });
        }

        // åŠ¨ç”»æ˜¾ç¤ºç‰¹å¾æ¡
        function animateTraitBars() {
            setTimeout(() => {
                document.querySelectorAll('.trait-progress').forEach((bar, index) => {
                    const values = [0, 0, 0]; // åˆå§‹å€¼éƒ½ä¸º0
                    bar.style.width = values[index] + '%';
                });
            }, 500);
        }

        // åˆ‡æ¢åˆ†ææ ‡ç­¾
        function switchTab(tabName) {
            // æ›´æ–°æŒ‰é’®çŠ¶æ€
            document.querySelectorAll('.tab-button').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');

            // æ˜¾ç¤ºå¯¹åº”å›¾è¡¨
            document.getElementById('participation-chart').style.display = 'none';
            document.getElementById('subject-chart').style.display = 'none';
            document.getElementById('progress-chart').style.display = 'none';

            // æ˜¾ç¤ºé€‰ä¸­çš„å›¾è¡¨
            document.getElementById(tabName + '-chart').style.display = 'block';
        }

        // æ›´æ–°AIæ•°å­—ç”»åƒ
        function updatePortrait() {
            showNotification('æ­£åœ¨æ›´æ–°AIæ•°å­—ç”»åƒ...', 'info');
            
            // æ¨¡æ‹ŸAIåˆ†æè¿‡ç¨‹
            setTimeout(() => {
                // æ›´æ–°ç‰¹å¾å€¼
                const newValues = [75, 60, 85]; // æ¨¡æ‹Ÿæ–°çš„ç‰¹å¾å€¼
                document.querySelectorAll('.trait-progress').forEach((bar, index) => {
                    bar.style.width = newValues[index] + '%';
                });
                
                // æ›´æ–°ç™¾åˆ†æ¯”æ˜¾ç¤º
                const percentageElements = document.querySelectorAll('.ai-portrait-section .space-y-3 span');
                percentageElements[1].textContent = '75%';
                percentageElements[3].textContent = '60%';
                percentageElements[5].textContent = '85%';
                
                showNotification('AIæ•°å­—ç”»åƒæ›´æ–°å®Œæˆï¼', 'success');
            }, 2000);
        }

        // åˆ·æ–°æ¨èé¡¹ç›®
        function refreshRecommendations() {
            showNotification('æ­£åœ¨åˆ·æ–°æ¨èé¡¹ç›®...', 'info');
            
            setTimeout(() => {
                showNotification('æ¨èé¡¹ç›®å·²æ›´æ–°ï¼', 'success');
            }, 1500);
        }

        // æŸ¥çœ‹é¡¹ç›®è¯¦æƒ…
        function viewProject(projectId) {
            window.location.href = `/static/project-detail.html?id=${projectId}`;
        }

        // æ¢ç´¢çŸ¥è¯†ç‚¹
        function exploreKnowledge() {
            window.location.href = '/static/knowledge-map.html';
        }

        // è¯­è¨€åˆ‡æ¢
        function switchLanguage() {
            window.location.href = '/static/student-dashboard-en.html';
        }

        // é€šçŸ¥ç³»ç»Ÿ
        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = 'fixed bottom-4 right-4 px-6 py-3 rounded-lg shadow-lg z-50 transition-all duration-300';
            
            switch (type) {
                case 'success':
                    notification.classList.add('bg-green-500', 'text-white');
                    break;
                case 'error':
                    notification.classList.add('bg-red-500', 'text-white');
                    break;
                case 'info':
                    notification.classList.add('bg-blue-500', 'text-white');
                    break;
                default:
                    notification.classList.add('bg-gray-500', 'text-white');
            }
            
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 3000);
        }

        // æ¨¡æ‹Ÿæ•°æ®æ›´æ–°
        function simulateDataUpdate() {
            // æ›´æ–°ç»Ÿè®¡å¡ç‰‡
            setTimeout(() => {
                const statValues = document.querySelectorAll('.stat-card .text-3xl');
                statValues[0].textContent = '15'; // å­¦ä¹ å¤©æ•°
                statValues[1].textContent = '42'; // æé—®æ¬¡æ•°
                statValues[2].textContent = '3';  // é¡¹ç›®å‚ä¸
                statValues[3].textContent = '1250'; // å­¦ä¹ ç§¯åˆ†
            }, 1000);

            // æ›´æ–°å›¾è¡¨æ•°æ®
            setTimeout(() => {
                // æ›´æ–°å‚ä¸åº¦å›¾è¡¨
                participationChart.data.datasets[0].data = [0.2, 0.5, 0.8, 0.6, 0.9, 0.7, 1.0];
                participationChart.update();

                // æ›´æ–°å­¦ç§‘åˆ†å¸ƒå›¾è¡¨
                subjectChart.data.datasets[0].data = [40, 25, 20, 15];
                subjectChart.update();

                // æ›´æ–°å­¦ä¹ è¿›åº¦å›¾è¡¨
                progressChart.data.datasets[0].data = [75, 60, 45, 30];
                progressChart.update();
            }, 2000);
        }

        // é¡µé¢åŠ è½½åæ¨¡æ‹Ÿæ•°æ®æ›´æ–°
        setTimeout(simulateDataUpdate, 3000);
    </script>
</body>
</html>
